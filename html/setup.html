

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup &mdash; trace_airmass_source 0.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="api documentation" href="api_overview.html" />
    <link rel="prev" title="trace_airmass_source: trajectory analysis tool" href="README.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> trace_airmass_source
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#site-config">site config</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flexpart-simulations">FLEXPART simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hysplit-simulations">HYSPLIT simulations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_overview.html">api documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trace_airmass_source</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="site-config">
<h2>site config<a class="headerlink" href="#site-config" title="Permalink to this headline">¶</a></h2>
<p>Config files are formatted with the <a class="reference external" href="https://github.com/toml-lang/toml">toml mini language</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output_dir</span> <span class="o">=</span> <span class="s2">&quot;output/limassol/&quot;</span>
<span class="n">plot_dir</span> <span class="o">=</span> <span class="s2">&quot;plots/limassol&quot;</span>
<span class="n">traj_dir</span> <span class="o">=</span> <span class="s2">&quot;trajectories/limassol/&quot;</span>
<span class="n">partposit_dir</span> <span class="o">=</span> <span class="s2">&quot;flexpart_partposit/limassol/&quot;</span>

<span class="c1"># geonames that should be used</span>
<span class="c1"># name is defined in geonames_config.toml</span>
<span class="c1"># and links the names to the .kml files</span>
<span class="n">geonames</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>

<span class="p">[</span><span class="n">time</span><span class="p">]</span>
    <span class="c1"># begin and end definitions only relevant if</span>
    <span class="c1"># gen_hysplit_input.py is used</span>
    <span class="c1">#begin = &#39;2018-03-14_00&#39;</span>
    <span class="c1">#end = &#39;2018-03-25_00&#39;</span>
    <span class="n">begin</span> <span class="o">=</span> <span class="s1">&#39;2015-09-09_00&#39;</span>
    <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;2015-09-14_00&#39;</span>
    <span class="c1"># time step for which trajectories are calculated</span>
    <span class="n">step</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="c1"># duration of each trajectory</span>
    <span class="n">tr_duration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">240</span>

<span class="p">[</span><span class="n">flexpart</span><span class="p">]</span>
    <span class="n">no_particles</span> <span class="o">=</span> <span class="mi">500</span>

<span class="p">[</span><span class="n">plotmap</span><span class="p">]</span>
    <span class="n">maptype</span> <span class="o">=</span> <span class="s1">&#39;miller&#39;</span>
    <span class="n">timeinterval</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">heights</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1500.0</span><span class="p">,</span> <span class="mf">3000.0</span><span class="p">,</span> <span class="mf">4500.0</span><span class="p">,</span> <span class="mf">6000.0</span><span class="p">]</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">85</span><span class="p">]</span>
    <span class="n">centerlon</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>

<span class="p">[</span><span class="n">height</span><span class="p">]</span>
    <span class="n">top</span> <span class="o">=</span> <span class="mi">12000</span>
    <span class="n">plottop</span> <span class="o">=</span> <span class="mi">10250</span>
    <span class="c1"># reception heights that are used</span>
    <span class="c1"># &#39;md&#39; mixing depth, &#39;2.0&#39; in km without unit</span>
    <span class="n">reception</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;md&#39;</span><span class="p">,</span> <span class="s1">&#39;2.0&#39;</span><span class="p">,</span> <span class="s1">&#39;5.0&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">station</span><span class="p">]</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Limassol, Cyprus&#39;</span>
    <span class="n">short_name</span> <span class="o">=</span> <span class="s1">&#39;limassol&#39;</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="mf">34.677</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="mf">33.038</span>
    <span class="n">altitude</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="flexpart-simulations">
<h2>FLEXPART simulations<a class="headerlink" href="#flexpart-simulations" title="Permalink to this headline">¶</a></h2>
<p>FLEXPART simulations are controlled with with template files in <code class="file docutils literal notranslate"><span class="pre">flexpart_simulations/</span></code>. Some settings are predefined in the <code class="file docutils literal notranslate"><span class="pre">*_template</span></code> files, <cite>${var}</cite> are adaped for each run with the python template library.
Per default, the particle positions during the backward simulation are dumped every 3 hours.</p>
</div>
<div class="section" id="hysplit-simulations">
<h2>HYSPLIT simulations<a class="headerlink" href="#hysplit-simulations" title="Permalink to this headline">¶</a></h2>
<p>HYSPLIT backward trajectories are required, a 10-day 27-member ensemble setup is recommended. Please note that HYSPLIT itself is not provided within this package (The binary to run is <cite>hyts_ens</cite> with the respective <cite>CONTROL</cite> file).
Meteorological input data for HYSPLIT are taken from the GDAS1 dataset (&lt;<a class="reference external" href="https://www.ready.noaa.gov/gdas1.php">https://www.ready.noaa.gov/gdas1.php</a>&gt;) provided by the Air Resources Laboratory (ARL) of the U.S. National Weather Service’s National Centers for Environmental Prediction (NCEP).
An trajectory is calculated every 3h in steps of 500m. Conveniently the input trajectories are placed in the <code class="file docutils literal notranslate"><span class="pre">trajectories</span></code> directory.</p>
<p>Following setting provide a starting point:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SETUP</span><span class="o">.</span><span class="n">CFG</span>

    <span class="o">&amp;</span><span class="n">SETUP</span>
    <span class="n">KMSL</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_rain</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_tpot</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_tamb</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_mixd</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_relh</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_terr</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">dxf</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">dyf</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">dzf</span><span class="o">=</span><span class="mf">0.008</span><span class="p">,</span>
    <span class="o">/</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRAJ</span><span class="o">.</span><span class="n">CFG</span>

    <span class="o">&amp;</span><span class="n">SETUP</span>
    <span class="n">tratio</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">,</span>
    <span class="n">delt</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">mgmin</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">khmax</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">,</span>
    <span class="n">kmixd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">kmsl</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">k10m</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">nstr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">mhrs</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">,</span>
    <span class="n">nver</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tout</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
    <span class="n">tm_pres</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_tpot</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_tamb</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_rain</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_mixd</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_relh</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tm_sphu</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_mixr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_dswf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tm_terr</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">dxf</span> <span class="o">=</span> <span class="mf">0.40</span><span class="p">,</span>
    <span class="n">dyf</span> <span class="o">=</span> <span class="mf">0.40</span><span class="p">,</span>
    <span class="n">dzf</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="n">messg</span> <span class="o">=</span> <span class="s1">&#39;MESSAGE&#39;</span><span class="p">,</span>
    <span class="o">/</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_overview.html" class="btn btn-neutral float-right" title="api documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="README.html" class="btn btn-neutral float-left" title="trace_airmass_source: trajectory analysis tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Martin Radenz

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>